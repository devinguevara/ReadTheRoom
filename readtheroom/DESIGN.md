DESIGN:

## select.html
The “/select” route in our app.py file redirects to the select.html file and passes the variable display into the HTML file.  display is defined as the output of a SQL query: we select 4 random rows from songs.db including the database’s artist, song, danceability, energy, and genre columns.

Select.html is a slightly more complex file. We use a jinja block to include features from our layout, like the navigation bar. The top of the page displays a table with 4 rows that displays the output of the aforementioned SQL query in app.py. Each time the webpage is refreshed, 4 new random songs are loaded from songs.db onto the table in select.html. This is because we want users to have new voting options for each round of songs their DJ plays. Song.db was downloaded as a csv from a user who pulled the top 2000 songs from spotify and posted them on kaggle: https://www.kaggle.com/datasets/paradisejoy/top-hits-spotify-from-20002019

Below the table, we have created 5 buttons: 4 buttons corresponding to each of the 4 songs displayed in the table and a “call vote” button at the bottom of the page. The first 4 buttons display the number of votes for their respective song option each time they are clicked and the “call vote” button displays the song option with the greatest number of votes. The functionality of these buttons was created using JavaScript. First, we declared a counter for each of the 4 buttons in the page and then we declared a variable for each of the buttons themselves using .getElementById. For each of the four buttons, we created an Event Listener in which a function is called each time the buttons are clicked. In this function, the counters we declared above are increased each time the buttons are clicked and the number of votes for each song is displayed under its respective button. The Event Listener function function for the “call vote” button is a little different. We use the Math.max() function to find the maximum number of votes from each counter. When the “call vote” button is clicked, the program displays an announcement declaring the winning song after each round of votes. Inspiration for displaying the number of clicks was from a user in stack overflow: https://stackoverflow.com/questions/24075219/javascript-code-to-count-number-of-clicks-on-a-button.

Since the number of guests at a social gathering varies, we did not limit the number of times a button could be clicked. We also were not able to find a way to keep a single user from voting more than once since each user would be logging in with the same user code.

## register.html
In our app.py file, we have created a “/register” route that is accessible via GET and POST methods since this page requires user input. If the user accesses the page via POST, the user (in this case a DJ) is prompted to enter a unique code that all other guests at their social event will use to login. If no user code is entered, the user is redirected to apology.html, where they will receive an error message telling them to enter a code. We then used a try and except block to check whether the user code entered by the user already exists in our users database, users.db; the program attempts to insert the user code into users.db but redirects the user to an error page if this is not possible (this would occur if the user code has already been inserted into users.db). If the user code is added to users.db successfully, the user’s login information is saved and the user is redirected to the website’s homepage. The register.html page is rather simple; it only displays a form for the user to enter a code and instructions for the user.

## rate.html
Our app.py file creates a “/rate” route in which users are redirected to the rate.html file. The HTML file itself displays a floating form adapted from Bootstrap that prompts users for their name and a comment they would like to make about their DJ’s performance or their experience at their social event. We made use of the text-transform CSS property to create a more interactive experience for users in which the text boxes of the form expand when they are clicked.
Below the form, there is a table that will display all comments added by the user through the form. We created this feature using JavaScript. First, we created an Event Listener for the submit button in the form that calls the function display when the button is clicked. Within this function, we declare the variables user and feedback which correspond to the values inputted into the “name” and “comment” fields of the form, respectively. If either one of these fields is empty, the user receives an alert telling them to fill in both fields.

We also declare a variable comments for the table that will display the comments. We then used the InsertRow() method in JavaScript to add a new row to the comments table and the InsertCell() method to add new cells within that row to the same table. Using .innerHTML, we assigned the variables user and feedback to cells 1 and 2, respectively. Finally, we increased a row counter at the end of the function to ensure that new rows were added to the table for each comment added by the user. Since these comments would be relevant only for each round of music during a social event (each time a song is played by a DJ), we thought it would be best to have this “comment section” reset each time the website is reloaded rather than permanently saving the comments to some database.

## login.html
We adapted the code in our app.py file for the “/login” route from the CS50 Finance PSET (we obtained permission from staff to do this). If the “/login” route is accessed via POST, the user is prompted to enter an existing user code via the form in login.html. If no user code is entered, the user is redirected to apology.html, where they will see an error message telling them to enter a user code. We then use a SQL query to search users.db for the user code provided. If this does not return a row, we assume that the user code does not exist and the user is redirected to apology.html and presented with an error message telling them that the code has not been registered. Otherwise, the user is redirected to the homepage of the website and their login information is saved.

## layout.html
Our layout page contains all necessary links to other sheets in our project file (ex: a link to our CSS stylesheet to ensure that all HTML files can be edited via the same CSS stylesheet file) and source links like Bootstrap and Google Fonts. This page also contains an <h1> tag that will display our website’s logo and a navigation bar adapted from Bootstrap that will appear at the top of every page on our website. We have used Jinja blocks to ensure that different navigation links are visible to the user depending on their login status; if the user has not logged into the website, the Register and Login navigation links are displayed but if the user has logged in, the Browse, Select Music, Rate DJ, Logout, and Home tabs are displayed. The {% block main %} and {% endblock %} blocks are placeholders for the HTML code that will vary among HTML pages.

## index.html
The “/” route in app.py simply returns the index.html file for users when they first log into the website. The index.html page welcomes the user to the website and provides basic instructions for navigating the page.

## browse.html
Like the “/” route, the “/browse” route in app.py just returns the browse.html file for users when they click on the Browse navigation link. Browse.html is designed to act as a guide for the select.html page, which displays song titles as well as their genre, danceability, and energy levels. Some users may not understand these descriptors, so browse.html provides a brief description of danceability and energy descriptors and the various genres listed in our songs database.

## apology.html
Apology.html displays a picture of a confused-looking Bad Bunny. This image was downloaded from the internet, and the source is linked in the HTML file. Because each error message is unique to a user’s input, we used a Jinja {{ message }} block as a placeholder for the unique error message we wanted to present to users. In our app.py file, we declare the variable message as a string containing the specific error message we want to display for each error and pass that variable into apology.html.